# 咱吃啥 - 微信小程序

AI 分身帮你决定今天吃什么！输入邀请码进入群聊房间，让 AI 分身们讨论出最佳餐厅推荐。

## 🚀 快速开始

### 1. 导入项目

1. 下载并安装 [微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)
2. 打开微信开发者工具
3. 选择「导入项目」
4. 选择 `weapp` 文件夹
5. 填写你的小程序 AppID（测试号也可以）
6. 点击「导入」

### 2. 项目结构

```
weapp/
├── app.js              # 小程序入口
├── app.json            # 全局配置
├── app.wxss            # 全局样式
├── sitemap.json        # 站点地图
├── pages/              # 页面
│   ├── index/          # 首页
│   ├── room/           # 房间页（输入邀请码）
│   └── chat/           # 聊天页（AI分身讨论）
├── components/         # 组件
└── utils/              # 工具函数
```

### 3. 核心功能

#### 🏠 首页
- 进入 AI 群聊房间
- 快速开始（单人模式）
- 测试邀请码快捷入口

#### 🔐 房间页
- 输入 6 位邀请码
- 测试邀请码：`123456`、`888888`、`666666`
- 完善口味信息（昵称、菜系偏好、辣度）

#### 💬 聊天页
- AI 分身头像展示
- 逐条消息打字机效果
- 单人/多人对话模式
- 高德地图导航

### 4. 配置后端服务（可选）

当前使用模拟数据运行。如需接入真实 API：

编辑 `app.js` 中的 `globalData.apiBase`：

```javascript
globalData: {
  apiBase: 'https://your-server-domain.com/api'
}
```

### 5. 上传发布

1. 在微信开发者工具中点击「上传」
2. 登录微信公众平台
3. 进入「版本管理」
4. 提交审核
5. 审核通过后发布

## 📝 注意事项

### 小程序配置要求

在 `app.json` 中已配置：

```json
{
  "permission": {
    "scope.userLocation": {
      "desc": "需要获取位置以推荐附近餐厅"
    }
  }
}
```

### 高德地图导航

使用 `wx.openLocation` 打开地图，支持：
- 显示餐厅位置
- 一键导航
- 查看详细地址

### 数据存储

使用微信本地存储：
- `inviteCode` - 邀请码
- `userName` - 用户昵称
- `tasteProfile` - 口味偏好

## 🎨 自定义样式

主要颜色变量（`app.wxss`）：

```css
--primary: #ff6b35;      /* 主色 */
--secondary: #667eea;    /* 辅助色 */
--success: #10b981;      /* 成功 */
--warning: #f59e0b;      /* 警告 */
--error: #ef4444;        /* 错误 */
```

## 🔧 开发调试

### 开启调试模式

在开发者工具中：
1. 点击「详情」
2. 开启「不校验合法域名」
3. 开启「调试器」查看日志

### 模拟数据

测试邀请码：
- `123456` - 今晚聚餐群
- `888888` - 好友聚餐群
- `666666` - 周末聚会群

## 📱 真机预览

1. 点击开发者工具「预览」
2. 使用微信扫码
3. 在真机上测试所有功能

## 🐛 常见问题

**Q: 提示 "页面未找到"**
A: 检查 `app.json` 中 pages 配置是否正确

**Q: 样式错乱**
A: 确保基础库版本 >= 2.19.0

**Q: 地图无法打开**
A: 需要在「详情」->「本地设置」中开启「位置服务」

## 📄 许可证

MIT License
